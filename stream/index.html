<style>

	/* BASIC RESET -- from another project */
	ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,body,html,p,blockquote,fieldset,input{margin:0; padding:0;}

	/* HTML ELEMENTS -- from another project */
	body { background-color:black; font: 20px "Lucida Grande","Lucida Sans Unicode",Helvetica,Arial,Verdana,sans-serif; }
	h1 { padding:60px 0 0 40px; }
	p,form { padding:10px 40px; }
	a { color:#999; text-decoration:none; }
	a:hover { text-decoration:underline; }
	
	
	/* youtube mobile embed styles. Taken from some guy's site */
	.embed-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; margin-top: 50%} 
	.embed-container iframe, .embed-container object, .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
	
	/*keep a little margin at bottom below popup*/
	#dhamma-of-the-day { height: 95% }
	#id02 { height: 95% }
	#id01 { height: 95% }
	
	/* make close button larger and gray */
	#close-button { font-size: 20pt; color: rgb(186, 181, 181); }
	
	/* scroll within the popup, max height at 100% so overflow will scroll. Padding for the X button */
	.main-content { overflow-y: scroll; padding-top: 40px; height: 100% } 
	
	
	/* don't let the images get wider than popup. Auto scale height accordingly */
	.chant-image { width: 100%; }
	
	/* a little too much space taken up by the dhamma of the day images. Chop off the page numbers too */
	#dhamma-image-2, #dhamma-image-1 { margin-top: -40px }
	
</style>


<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8"/>

    <!-- Set the viewport to show the page at a scale of 1.0, and make it non-scalable -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>

    <!-- Make it fullscreen / hide the browser URL bar -->
    <meta name="apple-mobile-web-app-capable" content="yes" />


    <!--
        Give the status bar another colour
        Valid values for "content" are: "default" (white), "black" and "black-translucent"
        If set to "default" or "black", the content is displayed below the status bar. If set to
        "black-translucent", the content is displayed under the bar.
    -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    
    

    <!--
        Add a Home icon.
        By default, Mobile Safari searches for a file named "apple-touch-icon.png" in the root directory of your website.
        If it can't find any image there, you can specify it using the code below. Make sure the image has a dimension
        of 114x114 and is a PNG file. The glossy finish and resizing for the different devices will be done automatically.

        In case you don't want the gloss applied, use "apple-touch-icon-precomposed" instead of "apple-touch-icon".
    -->
    <link rel="apple-touch-icon" href="apple-touch-icon.png" /> <!-- apple-touch-icon.png -->

    <!--
        Add a splash screen / startup image.
        Take note this file exactly needs to be 320x460 for iPhone or 1004x768 for iPad, and is a PNG file.
        Also, this only works if "apple-mobile-web-app-capable" is set to "yes".
    -->
    <link rel="apple-touch-startup-image" href="images/startup.png" />

    <!--
        Prevent the user from elastic scrolling / rubber banding. Sadly, doesn't always work properly.
        For a more solid solution, check out ScrollFix ( https://github.com/joelambert/ScrollFix )
    -->
    <script>
    function BlockElasticScroll(event) {
        //event.preventDefault() ;
    }

    // In JavaScript, you can use "window.navigator.standalone" to detect wether
    // the page is being viewed on your website, or as a standalone application.

    // You can also the detect the device the user is using.
    // var isIPhone = navigator.userAgent.indexOf("iPhone") != -1 ;
    // var isIPod = navigator.userAgent.indexOf("iPod") != -1 ;
    // var isIPad = navigator.userAgent.indexOf("iPad") != -1 ;
    // var isIOs = isIPhone || isIPod || isIPad ;
    
    
    function loadDhamma() {
    	const startPage = 9;
    	const endPage = 111;
    	const totalPages = endPage - startPage + 1;

    	const selectedOddPagesFromStart = 2 * Math.ceil(Math.random()*totalPages / 2) - 1; //want odd start page

    	let pageNum = selectedOddPagesFromStart - 1 + startPage;

    	
    	
    	
    	const prefix = "dhamma/dpr2-";
    	const suffix = ".png";
    	document.getElementById('dhamma-image-1').src = prefix + (""+pageNum).padStart(3, "0") + suffix;
    	document.getElementById('dhamma-image-2').src = prefix + (""+(pageNum + 1)).padStart(3, "0") + suffix;
    }
    
    function loadImages() {
    	loadImageSet(1,155); //155 pages in book 1, 89  in book 2
    	loadImageSet(2,	89);
    }
    
    function loadImageSet(bookNum, maxPage) {
    	const holder = document.getElementById('book'+bookNum+'images')
    	for(let i=1; i<= maxPage; i++) {
    		let newImage = document.createElement("img");
    		//<img id="2-73" class="chant-image" src="chanting-book-2/73.png">
    		newImage.src = "chanting-book-"+bookNum+"/"+i+".png";
    		newImage.className = "chant-image"
    		newImage.id = bookNum+"-"+i;
    		holder.appendChild(newImage);
    	}
    }
    
    function loadTOCs() {
    	loadTOC(1, pageDataBook1);
    	loadTOC(2, pageDataBook2);	
    }
    
    function loadTOC(bookNum, data) {
    	const holder = document.getElementById('toc-'+bookNum)
    	data.forEach(function(obj) {
    		//<p><a href="#" onclick=showPages(1, [3,4,5...]); event>Morning chanting</a></p>
    		let newPara = document.createElement("p");	
    		let newLink = document.createElement("a");	
    		newLink.href = "#"+bookNum+"-"+obj.startPage; //jump to that start page when clicked (so as to scroll TOC out of view)
    		newLink.innerHTML = obj.name+" ("+ (obj.startPage- START_PAGE_OFFSET ) + ")";
    		newLink.addEventListener("click", function(event) {
    			event.preventDefault();  
    			showPages(bookNum, obj.pages)	
    		})
    		newPara.appendChild(newLink);
    		holder.appendChild(newPara);
    	})	
    	
    }
    
    function showPages(bookNum, pages) {
    	const holder = document.getElementById('book'+bookNum+'images')
    	
    	//hideAll images for book
    	
    	for(const element of holder.childNodes) if(element.style) element.style.display = "none"
    	
    	
    	//show only relevant ones
    	pages.forEach(pageNum => document.getElementById(bookNum+"-"+pageNum).style.display = "block")
    	
    	//jump to that ID
    	document.getElementById(bookNum+"-"+pages[0]).scrollIntoView(true)
    }
    
    function showAllPagesForBook(bookNum) {
    	const holder = document.getElementById('book'+bookNum+'images')
    	
    	//hideAll images for book
    	for(const element of holder.childNodes) if(element.style) element.style.display = "block"
    }
    
    const START_PAGE_OFFSET = 9;
    
    var pageDataBook1 = [{"name":"Morning Chanting","pages":[11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],"startPage":11},{"name":"Reflection on universal well being (English)","pages":[40],"startPage":40},{"name":"Evening Chanting (English)","pages":[28,30,32,34,36,38],"startPage":28},{"name":"Evening Chanting (Pali)","pages":[27,29,31,33,35,37],"startPage":27},{"name":"Verses of Sharing and Aspiration (Pali)","pages":[41],"startPage":41},{"name":"Verses of Sharing and Aspiration (English)","pages":[42],"startPage":42},{"name":"Verses on the Sharing of Merit","pages":[43,44],"startPage":43},{"name":"The Buddha's Words on Lovingkindness (Pali)","pages":[45,47],"startPage":45},{"name":"The Buddha's Words on Lovingkindness (English)","pages":[46,48],"startPage":46},{"name":"Reflection on Universal Well-Being (Pali)","pages":[49],"startPage":49},{"name":"Reflection on Universal Well-Being (English)","pages":[50],"startPage":50},{"name":"Suffusion With the Divine Abidings (Pali)","pages":[51,53],"startPage":51},{"name":"Suffusion With the Divine Abidings (English)","pages":[52,54],"startPage":52},{"name":"The Highest Blessings (English)","pages":[55,56,57],"startPage":55},{"name":"Reflection on the Unconditioned","pages":[58],"startPage":58},{"name":"Just as Rivers","pages":[59,60,61],"startPage":59},{"name":"Reflection on the Four Requisites","pages":[62,63],"startPage":62},{"name":"Five Subjects for Frequent Recollection","pages":[64,65],"startPage":64},{"name":"Ten Subjects for Frequent Recollection by One Who Has Gone Forth","pages":[66,67,68],"startPage":66},{"name":"Reflection on the Thirty-Two Parts","pages":[69,70],"startPage":69},{"name":"Reflection on the Off-Putting Qualities of the Requisites","pages":[71,72,73,74,75],"startPage":71},{"name":"Reflection on Impermanence","pages":[75,76,77],"startPage":75},{"name":"True and False Refuges","pages":[78,79],"startPage":78},{"name":"Verses on the Riches of a Noble One","pages":[80],"startPage":80},{"name":"Verses on the Three Characteristics","pages":[81,82],"startPage":81},{"name":"Verses on the Burden","pages":[83],"startPage":83},{"name":"Verses on a Shining Night of Prosperity","pages":[84,85],"startPage":84},{"name":"Verses on the Training Code (Version 1)","pages":[88,89],"startPage":88},{"name":"Requesting Paritta Chanting","pages":[134],"startPage":134},{"name":"Requesting the Three Refuges and Five Precepts","pages":[135,136,137,138,139],"startPage":135},{"name":"Verses on Respect for Dhamma ","pages":[86,87],"startPage":86},{"name":"Verses on the Training Code (Version 2)","pages":[90,91],"startPage":90},{"name":"Verses on the Buddha's First Exclamation","pages":[92],"startPage":92},{"name":"The Teaching on Mindfulness of Breathing","pages":[94,95,96,97,98,99],"startPage":94},{"name":"The Teaching on the Noble Eightfold Path","pages":[100,101,102,103,104,105,106,107,108,109],"startPage":100},{"name":"Teachings from the Discourse on Setting in Motion the Wheel of the Dhamma","pages":[110,111,112,113,114,115,116,117,118,119,120,121,122,123],"startPage":110},{"name":"The Teaching on Striving According to Dhamma","pages":[124,125,126,127,128],"startPage":124},{"name":"Verses of Tayana","pages":[129,130],"startPage":129},{"name":"Requesting a Dhamma Talk","pages":[133],"startPage":133},{"name":"Verses on the Last Instructions","pages":[93],"startPage":93},{"name":"Requesting the Three Refuges and the Eight Precepts","pages":[140,141,142,143,144,145],"startPage":140}]
    
	var pageDataBook2 = [{"name":"Setting in Motion the Wheel of Dhamma","pages":[11,13,15,17,19,21],"startPage":11},{"name":"Dhammacakkappavattana Sutta","pages":[12,14,16,18,20,22],"startPage":12},{"name":"The Characteristic of Not-Self","pages":[23,25,27,29,31],"startPage":23},{"name":"Anatta-lakkhana Sutta","pages":[24,26,28,30,32],"startPage":24},{"name":"The Fire Sermon","pages":[33,35,37],"startPage":33},{"name":"Aditta-pariyaya Sutta","pages":[34,36,38],"startPage":34},{"name":"Parittas","pages":[41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62],"startPage":41},{"name":"The Twenty-Eight Buddhas' Protection","pages":[63,65,67,69],"startPage":63},{"name":"Atanatiya Paritta","pages":[64,66,68,70],"startPage":64},{"name":"Funeral Chanting","pages":[73,74,75,76,77,78],"startPage":73}]
	
	//sort, since data comes out of order...
	const startPageSort = function(a, b) {
		return a.startPage - b.startPage;	
	}
	pageDataBook1.sort(startPageSort);
	pageDataBook2.sort(startPageSort);

    </script>

    <title>Stream</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

</head>
<body id=body onload="document.getElementById('dhamma-of-the-day').style.display='block'; loadDhamma(); loadImages(); loadTOCs(); "> 
	
	
	


	<div class='embed-container'>
		<iframe id="demo-video" style="display: none;" src='https://www.youtube.com/embed/zwuKRGndLN0?playsinline=1' frameborder='0'></iframe>
		<iframe id="real-video" src='https://www.youtube.com/embed/live_stream?channel=UCFAuQ5fmYYVv5_Dim0EQpVA&playsinline=1' frameborder='0' ></iframe>
	</div>

	<div class="w3-container">
	  <button onclick="document.getElementById('id01').style.display='block'" class="w3-button w3-black">Book 1</button>
	  <button onclick="document.getElementById('id02').style.display='block'" class="w3-button w3-black">Book 2</button>
	  
	  <div style="margin-top: 50px">
	  	<button class="w3-button w3-black" onclick="document.getElementById('demo-video').style.display='block'; document.getElementById('real-video').style.display='none'">(demo)</button>
	  </div>
	  
	  
	  <!-- dhamma of the day ---> 
	  <div id="dhamma-of-the-day" class="w3-modal">
	    <div class="w3-modal-content">
	      <div class="w3-container">
	        <span id="close-button" onclick="document.getElementById('dhamma-of-the-day').style.display='none'" class="w3-button w3-display-topright">&times;</span>
	        <div class="main-content">
	        	<img id="dhamma-image-1" class="chant-image" src="" >
	        	<img id="dhamma-image-2" class="chant-image" src="" >
	       	</div>
	      </div>
	    </div>
	  </div>
	  
	  
	  <!-- CHANTING BOOK 2 ---> 
	  
	  <div id="id02" class="w3-modal">
	    <div class="w3-modal-content">
	      <div class="w3-container">
	        <span id="close-button" onclick="document.getElementById('toc-2').scrollIntoView(true); document.getElementById('id02').style.display='none'; showAllPagesForBook(2)" class="w3-button w3-display-topright">&times;</span>
	        <div class="main-content">	        
	        	<div id="toc-2" class="toc">
	        		<!-- filled in by loadTOC -->
			    </div><!-- end TOC -->
			    
			    <div id="book2images" class="image-holder">
			    	<!-- onload, insert images here -->
			    	<!-- <img id="2-1" class="chant-image" src="chanting-book-2/1.png"> -->
			    </div>
		    </div>	 
	        
	      </div>
	    </div>
	  </div>
	  
	  <!-- CHANTING BOOK 1 ---> 
	
	  <div id="id01" class="w3-modal">
	    <div class="w3-modal-content">
	      <div class="w3-container">
	        <span id="close-button" onclick="document.getElementById('toc-1').scrollIntoView(true); document.getElementById('id01').style.display='none'; showAllPagesForBook(1)" class="w3-button w3-display-topright">&times;</span>
	        <div class="main-content">
			    <div id="toc-1" class="toc">
					<!-- filled in by loadTOC -->
			    </div><!-- end TOC -->
			    
			    <div id="book1images" class="image-holder">
					<!--loaded by loadImages: <img id="1-1" class="chant-image" src="chanting-book-1/1.png">-->
				
			    </div><!-- end image holder -->
        	</div><!-- end main content -->
		   
		   
	      </div>
	    </div>
	  </div>
	</div>

	




	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>

	


</body>
</html>
